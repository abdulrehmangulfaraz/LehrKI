
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Plan Generator - AI Teacher Toolkit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .header h1 {
            color: #333;
            font-size: 36px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            color: #666;
            font-size: 18px;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 20px;
        }

        .back-btn {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            font-weight: bold;
        }

        .back-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .planner-layout {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .sidebar-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .main-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .panel-icon {
            font-size: 32px;
            color: #667eea;
        }

        .panel-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .lesson-plan {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
            max-height: 600px;
            overflow-y: auto;
        }

        .lesson-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .lesson-title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .lesson-meta {
            color: #666;
            font-size: 16px;
        }

        .lesson-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-content {
            line-height: 1.6;
            color: #333;
        }

        .objectives-list {
            list-style: none;
            padding: 0;
        }

        .objectives-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .objectives-list li::before {
            content: '🎯';
            position: absolute;
            left: 0;
            top: 8px;
        }

        .materials-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .material-item {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .timeline {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }

        .timeline-item {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }

        .timeline-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .timeline-time {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 14px;
            min-width: 80px;
            text-align: center;
            margin-right: 15px;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-activity {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .timeline-description {
            color: #666;
            font-size: 14px;
        }

        .standards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .standard-item {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .standard-code {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .assessment-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }

        .assessment-type {
            font-weight: bold;
            color: #28a745;
            margin-bottom: 5px;
        }

        .differentiation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 15px 0;
        }

        .differentiation-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-top: 4px solid #ffc107;
        }

        .differentiation-card h5 {
            color: #ffc107;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .ai-assist {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .ai-assist h4 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .template-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .template-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .template-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .template-card.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .template-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .template-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .template-desc {
            font-size: 12px;
            color: #666;
        }

        .export-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
            margin-top: 30px;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #667eea;
            font-style: italic;
            padding: 40px;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .planner-layout {
                grid-template-columns: 1fr;
            }

            .sidebar-panel {
                position: static;
            }

            .container {
                padding: 15px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 28px;
                flex-direction: column;
            }

            .materials-list {
                grid-template-columns: 1fr;
            }

            .standards-grid {
                grid-template-columns: 1fr;
            }

            .differentiation-grid {
                grid-template-columns: 1fr;
            }
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 8px 16px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
        }

        .save-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            transform: translateX(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .save-indicator.show {
            transform: translateX(0);
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <span>📋</span>
                Lesson Plan Generator
            </h1>
            <p>
                Create comprehensive, standards-aligned lesson plans with AI assistance. Generate structured plans with 
                learning objectives, activities, assessments, and differentiation strategies tailored to your students' needs.
            </p>
            <a href="login.html" class="back-btn">← Back to Dashboard</a>
        </div>

        <div class="planner-layout">
            <!-- Sidebar Configuration Panel -->
            <div class="sidebar-panel">
                <div class="panel-header">
                    <div class="panel-icon">⚙️</div>
                    <div class="panel-title">Configuration</div>
                </div>

                <!-- Template Selection -->
                <div class="form-group">
                    <label>Choose Template</label>
                    <div class="template-selector">
                        <div class="template-card selected" onclick="selectTemplate('standard')">
                            <div class="template-icon">📚</div>
                            <div class="template-name">Standard</div>
                            <div class="template-desc">Traditional lesson format</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('inquiry')">
                            <div class="template-icon">🔍</div>
                            <div class="template-name">Inquiry</div>
                            <div class="template-desc">Problem-based learning</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('flipped')">
                            <div class="template-icon">🔄</div>
                            <div class="template-name">Flipped</div>
                            <div class="template-desc">Homework first, practice in class</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('project')">
                            <div class="template-icon">🏗️</div>
                            <div class="template-name">Project</div>
                            <div class="template-desc">Long-term project work</div>
                        </div>
                    </div>
                </div>

                <!-- Basic Information -->
                <div class="form-group">
                    <label for="lessonTitle">Lesson Title</label>
                    <input type="text" id="lessonTitle" placeholder="Enter lesson title..." value="Introduction to Fractions">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="subject">Subject</label>
                        <select id="subject">
                            <option value="mathematics">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="english">English Language Arts</option>
                            <option value="social-studies">Social Studies</option>
                            <option value="art">Art</option>
                            <option value="music">Music</option>
                            <option value="pe">Physical Education</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gradeLevel">Grade Level</label>
                        <select id="gradeLevel">
                            <option value="K">Kindergarten</option>
                            <option value="1">1st Grade</option>
                            <option value="2">2nd Grade</option>
                            <option value="3">3rd Grade</option>
                            <option value="4">4th Grade</option>
                            <option value="5">5th Grade</option>
                            <option value="6">6th Grade</option>
                            <option value="7">7th Grade</option>
                            <option value="8">8th Grade</option>
                            <option value="9">9th Grade</option>
                            <option value="10">10th Grade</option>
                            <option value="11">11th Grade</option>
                            <option value="12">12th Grade</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="duration">Duration (minutes)</label>
                        <input type="number" id="duration" value="45" min="15" max="180">
                    </div>
                    <div class="form-group">
                        <label for="classSize">Class Size</label>
                        <input type="number" id="classSize" value="25" min="1" max="50">
                    </div>
                </div>

                <div class="form-group">
                    <label for="topic">Main Topic/Concept</label>
                    <input type="text" id="topic" placeholder="What is the main focus?" value="Understanding fractions as parts of a whole">
                </div>

                <div class="form-group">
                    <label for="priorKnowledge">Prior Knowledge</label>
                    <textarea id="priorKnowledge" rows="3" placeholder="What should students already know?">Students understand basic counting and can identify shapes. Previous exposure to equal parts.</textarea>
                </div>

                <!-- AI Assistance -->
                <div class="ai-assist">
                    <h4>🤖 AI Assistant</h4>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="generateObjectives()">Generate Objectives</button>
                        <button class="quick-btn" onclick="suggestActivities()">Suggest Activities</button>
                        <button class="quick-btn" onclick="findStandards()">Find Standards</button>
                        <button class="quick-btn" onclick="createAssessment()">Create Assessment</button>
                    </div>
                    <button class="btn btn-primary" onclick="generateFullLesson()" style="width: 100%; margin-top: 15px;">
                        ✨ Generate Complete Lesson
                    </button>
                </div>

                <!-- Action Buttons -->
                <div class="btn-group" style="flex-direction: column;">
                    <button class="btn btn-success" onclick="saveLessonPlan()">💾 Save Plan</button>
                    <button class="btn btn-secondary" onclick="loadTemplate()">📂 Load Template</button>
                    <button class="btn btn-warning" onclick="clearPlan()">🗑️ Clear</button>
                </div>
            </div>

            <!-- Main Lesson Plan Panel -->
            <div class="main-panel">
                <div class="panel-header">
                    <div class="panel-icon">📋</div>
                    <div class="panel-title">Lesson Plan</div>
                </div>

                <div class="lesson-plan" id="lessonPlanContent">
                    <div class="lesson-header">
                        <div class="lesson-title" id="displayTitle">Introduction to Fractions</div>
                        <div class="lesson-meta">
                            <span id="displaySubject">Mathematics</span> • 
                            <span id="displayGrade">4th Grade</span> • 
                            <span id="displayDuration">45</span> minutes • 
                            <span id="displaySize">25</span> students
                        </div>
                    </div>

                    <!-- Learning Objectives -->
                    <div class="lesson-section">
                        <div class="section-title">
                            <span>🎯</span>
                            Learning Objectives
                        </div>
                        <div class="section-content">
                            <ul class="objectives-list" id="objectivesList">
                                <li>Students will identify fractions as parts of a whole</li>
                                <li>Students will represent fractions using visual models</li>
                                <li>Students will compare simple fractions (1/2, 1/3, 1/4)</li>
                                <li>Students will solve basic fraction problems in real-world contexts</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Standards Alignment -->
                    <div class="lesson-section">
                        <div class="section-title">
                            <span>📐</span>
                            Standards Alignment
                        </div>
                        <div class="section-content">
                            <div class="standards-grid" id="standardsGrid">
                                <div class="standard-item">
                                    <div class="standard-code">CCSS.MATH.4.NF.A.1</div>
                                    <div>Explain why a fraction a/b is equivalent to a fraction (n×a)/(n×b)</div>
                                </div>
                                <div class="standard-item">
                                    <div class="standard-code">CCSS.MATH.4.NF.A.2</div>
                                    <div>Compare two fractions with different numerators and denominators</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Materials & Resources -->
                    <div class="lesson-section">
                        <div class="section-title">
                            <span>📦</span>
                            Materials & Resources
                        </div>
                        <div class="section-content">
                            <div class="materials-list" id="materialsList">
                                <div class="material-item">🍕 Pizza fraction models</div>
                                <div class="material-item">📊 Fraction circles</div>
                                <div class="material-item">📱 Interactive whiteboard</div>
                                <div class="material-item">📝 Student worksheets</div>
                                <div class="material-item">✏️ Colored pencils</div>
                                <div class="material-item">📚 Math journals</div>
                            </div>
                        </div>
                    </div>

                    <!-- Lesson Timeline -->
                    <div class="lesson-section">
                        <div class="section-title">
                            <span>⏰</span>
                            Lesson Timeline
                        </div>
                        <div class="section-content">
                            <div class="timeline" id="timelineContent">
                                <div class="timeline-item">
                                    <div class="timeline-time">0-5 min</div>
                                    <div class="timeline-content">
                                        <div class="timeline-activity">Hook & Introduction</div>
                                        <div class="timeline-description">Show a pizza cut into different pieces. Ask: "How would you share this fairly?"</div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">5-15 min</div>
                                    <div class="timeline-content">
                                        <div class="timeline-activity">Direct Instruction</div>
                                        <div class="timeline-description">Introduce fraction terminology using visual models. Demonstrate 1/2, 1/3, 1/4.</div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">15-30 min</div>
                                    <div class="timeline-content">
                                        <div class="timeline-activity">Guided Practice</div>
                                        <div class="timeline-description">Students work with fraction circles in pairs to create and identify fractions.</div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">30-40 min</div>
                                    <div class="timeline-content">
                                        <div class="timeline-activity">Independent Practice</div>
                                        <div class="timeline-description">Complete fraction identification worksheet and math journal reflection.</div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">40-45 min</div>
                                    <div class="timeline-content">
                                        <div class="timeline-activity">Closure & Assessment</div>
                                        <div class="timeline-description">Exit ticket: Draw and label three different fractions. Quick class discussion.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Assessment Strategies -->
                    <div class="lesson-section">
                        <div class="section-title">
                            <span>✅</span>
                            Assessment Strategies
                        </div>
                        <div class="section-content" id="assessmentContent">
                            <div class="assessment-item">
                                <div class="assessment-type">Formative Assessment</div>
                                <div>Observation during guided practice, questioning techniques, peer discussions</div>
                            </div>
                            <div class="assessment-item">
                                <div class="assessment-type">Summative Assessment</div>
                                <div>Exit ticket with fraction identification and creation tasks</div>
                            </div>
                            <div class="assessment-item">
                                <div class="assessment-type">Self-Assessment</div>
                                <div>Math journal reflection: "What did I learn about fractions today?"</div>
                            </div>
                        </div>
                    </div>

                    <!-- Differentiation -->
                    <div class="lesson-section">
                        <div class="section-title">
                            <span>🎭</span>
                            Differentiation Strategies
                        </div>
                        <div class="section-content">
                            <div class="differentiation-grid" id="differentiationGrid">
                                <div class="differentiation-card">
                                    <h5>Advanced Learners</h5>
                                    <ul>
                                        <li>Explore equivalent fractions</li>
                                        <li>Compare fractions with different denominators</li>
                                        <li>Create word problems using fractions</li>
                                    </ul>
                                </div>
                                <div class="differentiation-card">
                                    <h5>Struggling Learners</h5>
                                    <ul>
                                        <li>Use concrete manipulatives</li>
                                        <li>Focus on unit fractions (1/2, 1/3, 1/4)</li>
                                        <li>Provide visual fraction strips</li>
                                    </ul>
                                </div>
                                <div class="differentiation-card">
                                    <h5>ELL Students</h5>
                                    <ul>
                                        <li>Vocabulary cards with pictures</li>
                                        <li>Peer partner support</li>
                                        <li>Visual representations emphasis</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Homework & Extension -->
                    <div class="lesson-section">
                        <div class="section-title">
                            <span>🏠</span>
                            Homework & Extensions
                        </div>
                        <div class="section-content" id="homeworkContent">
                            <p><strong>Homework:</strong> Find 3 examples of fractions in your home (pizza slices, chocolate bars, etc.). Draw and label them in your math journal.</p>
                            <p><strong>Extension Activities:</strong> Fraction cooking activity with family - measure ingredients using fractional measurements.</p>
                            <p><strong>Next Lesson Preview:</strong> We'll explore adding fractions with the same denominator using our visual models.</p>
                        </div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="editLessonPlan()">✏️ Edit Plan</button>
                    <button class="btn btn-secondary" onclick="duplicatePlan()">📄 Duplicate</button>
                    <button class="btn btn-success" onclick="sharePlan()">🤝 Share</button>
                </div>
            </div>
        </div>

        <!-- Export Section -->
        <div class="export-section">
            <h3 style="margin-bottom: 20px;">📤 Export Lesson Plan</h3>
            <p style="margin-bottom: 25px; color: #666;">Download or share your lesson plan in various formats</p>
            
            <div class="btn-group" style="justify-content: center;">
                <button class="btn btn-primary" onclick="exportPlan('pdf')">📄 PDF</button>
                <button class="btn btn-secondary" onclick="exportPlan('word')">📝 Word</button>
                <button class="btn btn-success" onclick="exportPlan('google')">📋 Google Docs</button>
                <button class="btn btn-warning" onclick="exportPlan('print')">🖨️ Print</button>
                <button class="btn btn-danger" onclick="exportPlan('email')">📧 Email</button>
            </div>
        </div>
    </div>

    <!-- Save Indicator -->
    <div id="saveIndicator" class="save-indicator">
        ✅ Lesson plan saved!
    </div>

    <script>
        let currentTemplate = 'standard';
        let lessonPlan = {
            title: 'Introduction to Fractions',
            subject: 'mathematics',
            gradeLevel: '4',
            duration: 45,
            classSize: 25,
            topic: 'Understanding fractions as parts of a whole',
            priorKnowledge: 'Students understand basic counting and can identify shapes. Previous exposure to equal parts.',
            objectives: [
                'Students will identify fractions as parts of a whole',
                'Students will represent fractions using visual models',
                'Students will compare simple fractions (1/2, 1/3, 1/4)',
                'Students will solve basic fraction problems in real-world contexts'
            ],
            standards: [
                { code: 'CCSS.MATH.4.NF.A.1', description: 'Explain why a fraction a/b is equivalent to a fraction (n×a)/(n×b)' },
                { code: 'CCSS.MATH.4.NF.A.2', description: 'Compare two fractions with different numerators and denominators' }
            ],
            materials: ['🍕 Pizza fraction models', '📊 Fraction circles', '📱 Interactive whiteboard', '📝 Student worksheets', '✏️ Colored pencils', '📚 Math journals'],
            timeline: [
                { time: '0-5 min', activity: 'Hook & Introduction', description: 'Show a pizza cut into different pieces. Ask: "How would you share this fairly?"' },
                { time: '5-15 min', activity: 'Direct Instruction', description: 'Introduce fraction terminology using visual models. Demonstrate 1/2, 1/3, 1/4.' },
                { time: '15-30 min', activity: 'Guided Practice', description: 'Students work with fraction circles in pairs to create and identify fractions.' },
                { time: '30-40 min', activity: 'Independent Practice', description: 'Complete fraction identification worksheet and math journal reflection.' },
                { time: '40-45 min', activity: 'Closure & Assessment', description: 'Exit ticket: Draw and label three different fractions. Quick class discussion.' }
            ]
        };

        // Update displays when form values change
        document.getElementById('lessonTitle').addEventListener('input', updateDisplays);
        document.getElementById('subject').addEventListener('change', updateDisplays);
        document.getElementById('gradeLevel').addEventListener('change', updateDisplays);
        document.getElementById('duration').addEventListener('input', updateDisplays);
        document.getElementById('classSize').addEventListener('input', updateDisplays);

        function updateDisplays() {
            const title = document.getElementById('lessonTitle').value || 'Untitled Lesson';
            const subject = document.getElementById('subject').value;
            const grade = document.getElementById('gradeLevel').value;
            const duration = document.getElementById('duration').value;
            const classSize = document.getElementById('classSize').value;

            document.getElementById('displayTitle').textContent = title;
            document.getElementById('displaySubject').textContent = getSubjectName(subject);
            document.getElementById('displayGrade').textContent = getGradeName(grade);
            document.getElementById('displayDuration').textContent = duration;
            document.getElementById('displaySize').textContent = classSize;

            lessonPlan.title = title;
            lessonPlan.subject = subject;
            lessonPlan.gradeLevel = grade;
            lessonPlan.duration = parseInt(duration);
            lessonPlan.classSize = parseInt(classSize);
        }

        function getSubjectName(subject) {
            const subjects = {
                'mathematics': 'Mathematics',
                'science': 'Science',
                'english': 'English Language Arts',
                'social-studies': 'Social Studies',
                'art': 'Art',
                'music': 'Music',
                'pe': 'Physical Education',
                'other': 'Other'
            };
            return subjects[subject] || subject;
        }

        function getGradeName(grade) {
            if (grade === 'K') return 'Kindergarten';
            return grade + (grade === '1' ? 'st' : grade === '2' ? 'nd' : grade === '3' ? 'rd' : 'th') + ' Grade';
        }

        function selectTemplate(template) {
            // Update visual selection
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            currentTemplate = template;
            
            // Apply template-specific changes
            switch(template) {
                case 'inquiry':
                    updateForInquiryTemplate();
                    break;
                case 'flipped':
                    updateForFlippedTemplate();
                    break;
                case 'project':
                    updateForProjectTemplate();
                    break;
                default:
                    updateForStandardTemplate();
            }
        }

        function updateForInquiryTemplate() {
            // Update timeline for inquiry-based learning
            const timeline = [
                { time: '0-10 min', activity: 'Problem Presentation', description: 'Present the driving question: "How can we fairly share different amounts?"' },
                { time: '10-25 min', activity: 'Investigation', description: 'Students explore fraction problems in small groups using manipulatives.' },
                { time: '25-35 min', activity: 'Findings Discussion', description: 'Groups share discoveries and strategies with the class.' },
                { time: '35-45 min', activity: 'Conclusion & Reflection', description: 'Synthesize learning and create hypothesis for next investigation.' }
            ];
            updateTimeline(timeline);
        }

        function updateForFlippedTemplate() {
            const timeline = [
                { time: '0-5 min', activity: 'Homework Review', description: 'Quick check of video notes and questions from home viewing.' },
                { time: '5-35 min', activity: 'Practice & Application', description: 'Work through fraction problems and activities in class with teacher support.' },
                { time: '35-45 min', activity: 'Assessment & Preview', description: 'Mini-quiz and preview of next home video content.' }
            ];
            updateTimeline(timeline);
        }

        function updateForProjectTemplate() {
            const timeline = [
                { time: '0-10 min', activity: 'Project Introduction', description: 'Introduce fraction restaurant menu project and success criteria.' },
                { time: '10-35 min', activity: 'Planning & Research', description: 'Students plan their menu items and fraction-based pricing.' },
                { time: '35-45 min', activity: 'Progress Check', description: 'Peer feedback and teacher conferences on project progress.' }
            ];
            updateTimeline(timeline);
        }

        function updateForStandardTemplate() {
            // Reset to standard timeline (already in lessonPlan object)
            updateTimeline(lessonPlan.timeline);
        }

        function updateTimeline(timeline) {
            const container = document.getElementById('timelineContent');
            container.innerHTML = '';
            
            timeline.forEach(item => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                timelineItem.innerHTML = `
                    <div class="timeline-time">${item.time}</div>
                    <div class="timeline-content">
                        <div class="timeline-activity">${item.activity}</div>
                        <div class="timeline-description">${item.description}</div>
                    </div>
                `;
                container.appendChild(timelineItem);
            });
        }

        // AI Assistant Functions
        function generateObjectives() {
            showLoadingState('Generating learning objectives...');
            
            setTimeout(() => {
                const topic = document.getElementById('topic').value;
                const grade = document.getElementById('gradeLevel').value;
                
                const newObjectives = [
                    `Students will understand the core concept of ${topic}`,
                    `Students will apply ${topic} in practical situations`,
                    `Students will analyze examples of ${topic}`,
                    `Students will create original work demonstrating ${topic}`
                ];
                
                updateObjectives(newObjectives);
                showSaveIndicator();
            }, 2000);
        }

        function suggestActivities() {
            showLoadingState('Suggesting engaging activities...');
            
            setTimeout(() => {
                const activities = [
                    { time: '0-10 min', activity: 'Interactive Hook', description: 'Engage students with a real-world problem or demonstration' },
                    { time: '10-25 min', activity: 'Collaborative Exploration', description: 'Students work in groups to discover key concepts' },
                    { time: '25-40 min', activity: 'Hands-on Practice', description: 'Apply learning through manipulatives and activities' },
                    { time: '40-45 min', activity: 'Reflection & Assessment', description: 'Students demonstrate understanding and reflect on learning' }
                ];
                
                updateTimeline(activities);
                showSaveIndicator();
            }, 2000);
        }

        function findStandards() {
            showLoadingState('Finding relevant standards...');
            
            setTimeout(() => {
                const subject = document.getElementById('subject').value;
                const grade = document.getElementById('gradeLevel').value;
                
                let standards = [];
                if (subject === 'mathematics') {
                    standards = [
                        { code: `CCSS.MATH.${grade}.NBT.A.1`, description: 'Understand place value concepts' },
                        { code: `CCSS.MATH.${grade}.OA.A.2`, description: 'Solve problems using operations' }
                    ];
                } else if (subject === 'english') {
                    standards = [
                        { code: `CCSS.ELA.${grade}.RL.1`, description: 'Read and comprehend literature' },
                        { code: `CCSS.ELA.${grade}.W.3`, description: 'Write narratives' }
                    ];
                } else {
                    standards = [
                        { code: `STATE.${subject.toUpperCase()}.${grade}.1`, description: 'Core content standard' },
                        { code: `STATE.${subject.toUpperCase()}.${grade}.2`, description: 'Application standard' }
                    ];
                }
                
                updateStandards(standards);
                showSaveIndicator();
            }, 1500);
        }

        function createAssessment() {
            showLoadingState('Creating assessment strategies...');
            
            setTimeout(() => {
                const assessments = [
                    { type: 'Formative Assessment', description: 'Observation checklist during group work and individual conferences' },
                    { type: 'Summative Assessment', description: 'End-of-lesson performance task demonstrating key concepts' },
                    { type: 'Peer Assessment', description: 'Students evaluate each other\'s work using provided rubric' },
                    { type: 'Self-Assessment', description: 'Reflection journal entry on learning goals and challenges' }
                ];
                
                updateAssessments(assessments);
                showSaveIndicator();
            }, 1500);
        }

        function generateFullLesson() {
            showLoadingState('Generating complete lesson plan...');
            
            // Simulate AI generation with progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 20;
                updateProgress(progress);
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    setTimeout(() => {
                        hideLoadingState();
                        generateObjectives();
                        setTimeout(() => {
                            suggestActivities();
                            setTimeout(() => {
                                findStandards();
                                setTimeout(() => {
                                    createAssessment();
                                    showSaveIndicator();
                                }, 500);
                            }, 500);
                        }, 500);
                    }, 500);
                }
            }, 400);
        }

        // Utility Functions
        function showLoadingState(message) {
            const lessonPlan = document.getElementById('lessonPlanContent');
            lessonPlan.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    ${message}
                </div>
            `;
        }

        function updateProgress(percent) {
            const lessonPlan = document.getElementById('lessonPlanContent');
            lessonPlan.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    Generating lesson plan...
                    <div class="progress-bar" style="width: 200px; margin-top: 15px;">
                        <div class="progress-fill" style="width: ${percent}%;"></div>
                    </div>
                    <div style="margin-top: 10px;">${percent}%</div>
                </div>
            `;
        }

        function hideLoadingState() {
            // Restore the original lesson plan content
            location.reload();
        }

        function updateObjectives(objectives) {
            const list = document.getElementById('objectivesList');
            list.innerHTML = '';
            objectives.forEach(objective => {
                const li = document.createElement('li');
                li.textContent = objective;
                list.appendChild(li);
            });
        }

        function updateStandards(standards) {
            const grid = document.getElementById('standardsGrid');
            grid.innerHTML = '';
            standards.forEach(standard => {
                const div = document.createElement('div');
                div.className = 'standard-item';
                div.innerHTML = `
                    <div class="standard-code">${standard.code}</div>
                    <div>${standard.description}</div>
                `;
                grid.appendChild(div);
            });
        }

        function updateAssessments(assessments) {
            const container = document.getElementById('assessmentContent');
            container.innerHTML = '';
            assessments.forEach(assessment => {
                const div = document.createElement('div');
                div.className = 'assessment-item';
                div.innerHTML = `
                    <div class="assessment-type">${assessment.type}</div>
                    <div>${assessment.description}</div>
                `;
                container.appendChild(div);
            });
        }

        function showSaveIndicator() {
            const indicator = document.getElementById('saveIndicator');
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 3000);
        }

        // Action Functions
        function saveLessonPlan() {
            showSaveIndicator();
            // Simulate saving
            console.log('Lesson plan saved:', lessonPlan);
        }

        function loadTemplate() {
            alert('This would open a library of pre-built lesson plan templates to choose from.');
        }

        function clearPlan() {
            if (confirm('Are you sure you want to clear the current lesson plan?')) {
                location.reload();
            }
        }

        function editLessonPlan() {
            alert('Edit mode would allow inline editing of all lesson plan sections.');
        }

        function duplicatePlan() {
            alert('Lesson plan duplicated! You can now modify it for a different class or topic.');
        }

        function sharePlan() {
            alert('Share options: Email to colleagues, Add to school resource library, Generate shareable link.');
        }

        function exportPlan(format) {
            const formats = {
                'pdf': 'PDF document',
                'word': 'Microsoft Word document', 
                'google': 'Google Docs',
                'print': 'printer-friendly format',
                'email': 'email with attachments'
            };

            alert(`Exporting lesson plan "${lessonPlan.title}" as ${formats[format]}...\n\nIn the full version, this would generate and download/send the actual file.`);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplays();
            console.log('Lesson Plan Generator loaded successfully!');
        });
    </script>
</body>
</html>